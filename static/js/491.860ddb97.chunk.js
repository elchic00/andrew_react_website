"use strict";(self.webpackChunkandrew_react_website=self.webpackChunkandrew_react_website||[]).push([[491],{491:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var n=r(43),s=r(579);const a=e=>{let{percentageWidth:t=50,startSnakeSize:r=4,appleColor:a="red",snakeColor:l="green",gridSize:o=20,speed:c=67}=e;const i=(0,n.useRef)(null),u=(0,n.useRef)(null),h=(0,n.useRef)(!0),d=(0,n.useRef)(!1),[x,f]=(0,n.useState)(!0),[m,y]=(0,n.useState)(0),[w,g]=(0,n.useState)(()=>parseInt(localStorage.getItem("snakeHighScore")||"0",10)),[v,p]=(0,n.useState)(!1),[b,S]=(0,n.useState)(!1),[k,j]=(0,n.useState)(0);(0,n.useEffect)(()=>{localStorage.setItem("snakeHighScore",String(w))},[w]),(0,n.useEffect)(()=>{const e=i.current,n=e.getContext("2d");let s=o;const x=()=>{const r=u.current?u.current.clientWidth:600,n="string"===typeof t?parseFloat(t):t,a=Math.max(200,Math.floor(r*n/100)),l=Math.floor(a/s)||10;return e.width=l*s,e.height=l*s,{scale:l,size:s}};let{scale:m}=x();void 0!==n.imageSmoothingEnabled&&(n.imageSmoothingEnabled=!1);let v=[],b={x:1,y:0},k={x:1,y:0},j={x:0,y:0},M=0,N=Math.max(25,c||50);const E=()=>{let e=null;for(;;){const t=Math.floor(Math.random()*s),r=Math.floor(Math.random()*s);let n=!1;for(let e=0;e<v.length;e++)if(v[e].x===t&&v[e].y===r){n=!0;break}if(!n){e={x:t,y:r};break}}j=e},R=()=>{n.fillStyle="#0f172a",n.fillRect(0,0,e.width,e.height),n.fillStyle=a,n.fillRect(j.x*m,j.y*m,m,m),n.fillStyle=l,v.forEach((e,t)=>{n.fillRect(e.x*m,e.y*m,m-1,m-1)})},C=()=>{if(!h.current)return;const e={x:(v[0].x+b.x+s)%s,y:(v[0].y+b.y+s)%s};if(v.some(t=>t.x===e.x&&t.y===e.y))return h.current=!1,f(!1),S(!0),d.current=!0,void g(e=>Math.max(e,M));v.unshift(e),e.x===j.x&&e.y===j.y?(M+=1,y(M),M>w&&(g(M),p(!0),localStorage.setItem("snakeHighScore",String(M))),N>25&&(N=Math.max(25,N-.5)),E()):v.pop(),k=b},L=e=>{const t=e.key.toLowerCase();let r=null;if("arrowup"!==t&&"w"!==t||(r={x:0,y:-1}),"arrowdown"!==t&&"s"!==t||(r={x:0,y:1}),"arrowleft"!==t&&"a"!==t||(r={x:-1,y:0}),"arrowright"!==t&&"d"!==t||(r={x:1,y:0})," "===t&&(d.current||(h.current=!h.current,f(h.current))),r){if(r.x===-k.x&&r.y===-k.y)return;b=r}};let z=null;const A=e=>{const t=e.touches[0];z={x:t.clientX,y:t.clientY}},F=e=>{if(!z)return;const t=e.changedTouches[0],r=t.clientX-z.x,n=t.clientY-z.y;Math.abs(r)>Math.abs(n)?r>20?1===k.x&&0===k.y||(b={x:1,y:0}):r<-20&&(-1===k.x&&0===k.y||(b={x:-1,y:0})):n>20?0===k.x&&1===k.y||(b={x:0,y:1}):n<-20&&(0===k.x&&-1===k.y||(b={x:0,y:-1})),z=null};(()=>{v=[];const e=Math.floor(s/2),t=Math.floor(s/2);for(let n=0;n<r;n++)v.push({x:e-n,y:t});b={x:1,y:0},k={x:1,y:0},M=0,h.current=!0,N=Math.max(25,c||50),p(!1),E(),S(!1),d.current=!1,y(0)})(),R(),window.addEventListener("keydown",L),e.addEventListener("touchstart",A,{passive:!0}),e.addEventListener("touchend",F,{passive:!0});let H=null,I=0,_=0;const W=e=>{I||(I=e);const t=e-I;I=e,_+=t;const r=Math.max(25,N);for(;_>=r;)h.current&&C(),_-=r;R(),H=requestAnimationFrame(W)};H=requestAnimationFrame(W);const q=new ResizeObserver(()=>{const e=x();m=e.scale,R()}),O=u.current;return O&&q.observe(O),()=>{H&&cancelAnimationFrame(H),window.removeEventListener("keydown",L),e.removeEventListener("touchstart",A),e.removeEventListener("touchend",F),O&&q.disconnect()}},[k,t,r,a,l,o,c]);return(0,s.jsx)("section",{id:"snake",ref:u,children:(0,s.jsxs)("div",{className:"overflow-hidden text-center h-full h-screen",children:[(0,s.jsx)("h2",{className:"text-white text-3xl mb-1 font-medium pt-10 mt-12",children:"Use arrows or W/A/S/D keys to play:"}),(0,s.jsx)("div",{className:"flex justify-center pt-5",children:(0,s.jsxs)("div",{style:{width:"".concat(t,"%")},className:"relative max-w-[640px] pb-16 mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsxs)("div",{className:"text-white",children:["Score: ",m]}),(0,s.jsxs)("div",{className:"text-white",children:["High: ",w]})]}),(0,s.jsx)("canvas",{ref:i,className:"block w-full h-auto border-4 border-white rounded-md shadow-lg bg-[#0f172a]"}),(0,s.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-3 flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{b?(h.current=!0,f(!0),S(!1),d.current=!1,y(0),p(!1),j(e=>e+1)):(h.current=!h.current,f(h.current))},className:"px-3 py-1 rounded bg-slate-700 text-white",children:x?"Pause":b?"Start":"Resume"}),(0,s.jsx)("button",{onClick:()=>{h.current=!0,f(!0),S(!1),d.current=!1,y(0),j(e=>e+1)},className:"px-3 py-1 rounded bg-slate-700 text-white",children:"Restart"})]}),b&&(0,s.jsxs)("div",{style:{color:"#f87171",marginTop:8},children:["Game Over \u2014 final score: ",m,(0,s.jsx)("div",{children:v?"New local high score!":""})]})]})})]})})}}}]);
//# sourceMappingURL=491.860ddb97.chunk.js.map